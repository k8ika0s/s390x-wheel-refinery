flowchart TD
  A[Build queued] --> B[Worker build poll loop]
  B --> C[Lease build job]
  C --> D[Status leased and attempts increment]
  D --> E[Runner executes build]
  E -->|stream logs| F[Log chunks stored and broadcast]
  E -->|success| G[Store artifacts and update status]
  G --> H[Emit built event and final log entry]
  E -->|failure| I[Auto fix evaluates logs]
  I -->|apply recipes| J[Retry with backoff]
  J --> C
  I -->|no recipes or blocked| K[Mark failed]
  K --> H
  G --> L{Repair enabled}
  L -->|yes| M[Run repair tool and store repaired wheel]
  L -->|no| N[Done]
  M --> N
