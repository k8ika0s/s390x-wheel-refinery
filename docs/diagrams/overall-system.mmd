flowchart LR
    subgraph Inputs
        IN[Uploaded wheels / requirements.txt]
        CFG[Config: python versions, policy, strategy]
    end

    PLAN[Go planner<br/>DAG: runtime+packs+wheels+repair<br/>CAS reuse vs build]
    Q[Queue backend<br/>file / Redis / Kafka]
    subgraph CAS
        ZOT["CAS registry: Zot"]
        MINIO["Object store: MinIO (inputs + wheelhouse)"]
    end
    subgraph Builder
        WKR[Go worker]
        RUN[Podman runner<br/>builder image]
        REC[Recipes pack/runtime/repair]
    end
    CP[Go control-plane API]
    UI[React UI]

    IN --> CP
    CP --> PLAN
    CFG --> PLAN
    PLAN --> Q
    PLAN -. cache check .-> ZOT
    Q --> WKR
    WKR -->|fetch wheels/packs/runtime| ZOT
    WKR --> RUN
    RUN -->|build+repair| ZOT
    RUN -->|wheel uploads| MINIO
    RUN -->|logs/manifest/events| CP
    CP <--> UI
